<header>

# セルオートマトンはいいぞ。
<div class="author"ctes091x></div>

</header>

<main class="two-column">

## はじめに
みなさんこんにちは。高校マイコン部副部長のctes091xです。本稿では、格子状の空間とごく簡単なルールによって非常に複雑な時間発展を見せる大変面白い数理モデルである**セルオートマトン**を紹介します。

1950年代に自己複製機械に関する研究のためにJohn von Neumannによって考案されたモデルであり、その振る舞いが多くの研究者によって詳しく調べられてきました。また分子の反応や群衆の振る舞いなどのシミュレーションにも応用可能であるほか、宇宙そのものがセルオートマトンによって構成されているといった仮説もあり、その広がりはとどまるところを知りません。

本稿では最も著名なセルオートマトンであるライフゲームと、考えうる最もシンプルなセルオートマトンである基本セルオートマトンを取り上げ、その興味深さを語ろうと思います。どうかお付き合い下さい。

## ライフゲームとセルオートマトンの基礎
### ライフゲームで遊ぶ
まずはイメージを掴むために、コンウェイのライフゲームで遊んでみましょう。

![[画像1]conwaylife.com のライフゲーム環境(画像中央)](playground.png)

Webブラウザでhttps://conwaylife.com/ を開くと、ページ上に格子が表示され、白と黒のマス目によってパターンが形作られているのが見えるでしょう。操作するために一度クリックしたのち、`Enter`キーを押すとライフゲームが開始されます。

ライフゲームが開始されると、マス目全体の状態は一定時間ごとに、全て一斉に更新されていきます。状態遷移後にセルが取る状態は、それ自身とその上下左右斜め、合計8個のセル(**近傍**)が取っている状態によって定まります。

白のマスは、上下左右斜め8マスのうち**ちょうど3つ**のマスが黒であるときに黒に変わります。黒マスの周りに黒マスが**2個または3個**あるときには、その黒マスは黒で居続けます。これ以外の状態では、マスは白となります。

ライフゲームのルールは、適度な密度で黒マスが誕生/生存、過疎/過密になると死亡し白マスに戻るというものと見ることができ、しばしば生物の繁殖の特徴にも例えられます。状態遷移が発生する「程よい密度」の存在が、ライフゲームの独特な振る舞いの鍵となっています。

ライフゲームのルールはB3/S23と符号化されます。BはBirth(誕生)、SはSurvive(生存)を表し、それぞれの現象が発生するときの周囲の黒マス数を示しています。ライフゲームと同様に、2次元に広がった格子状の空間と周囲の黒マス数によるセルの誕生/生存のルールを持ったセルオートマトンは総称して**Life-likeセルオートマトン**と呼ばれます。このうちルールB36/S23はHighLifeと呼ばれ、ライフゲームと似通いながらも少し違った時間発展が見られます。

### セルオートマトンの特徴
他の数理モデルと比較して、セルオートマトンのもっとも際立ったセルオートマトンの特徴は離散性、均一性、並列性にあるといえるでしょう。

空間、時間にはそれぞれセルと世代という最小単位があり、これらは離散的です。また、セルの取りうる状態数も有限であり、離散的になっています。

セルオートマトン内では、全てのセルは同一の局所的なルールに従って状態遷移を行っています。セルは近傍が現在取っている状態のみに基づいて状態遷移を行います。ライフゲームでは周囲8セルの状態のみが参照されるため、1世代ごとに1セル以上先に情報が伝播することはありません。

セルの状態遷移は、空間全体で完全に同期されて発生します。全セルの状態は一斉に更新され、空間全体の次の世代のパターンが生成されます。

### ライフゲームの有名なパターン
ライフゲームにおいて有名なパターンの例を以下に挙げます。

**固定物体**: 次の世代でも同一のパターンを維持するようなパターンで、**ブロック**などが特に頻出です。

<!-- https://conwaylife.com/wiki/List_of_common_still_lifes に、ライフゲームの主要な固定物体のリストがあります。 -->

<!-- ![ブロック](https://conwaylife.com/w/images/4/48/Block.png) -->

**振動子**: 一定の周期ごとに同一のパターンを繰り返すようなパターンで、**ブリンカー**などが有名です。

<!-- ![ブリンカー](https://conwaylife.com/w/images/2/2c/Blinker.png) -->

<!-- ![銀河](https://conwaylife.com/w/images/9/9b/Koksgalaxy.png) -->

全ての周期の振動子が存在するかどうかは長年未解決でした。2013年4月、グライダー(後述)を直角に反射する固定物体**Snark**が発見されたことにより、43以上の任意の周期を持つ振動子が構築できるようになりました。さらに、本稿執筆中の2023年7月14日には周期19の振動子**Cribbage**、同22日には周期41の振動子**204P41**が発見されたことにより、全周期の振動子の存在が証明されました。

![[画像2]Cribbage](https://conwaylife.com/w/images/6/6a/Cribbage.png)

![[画像3]204P41](https://conwaylife.com/w/images/8/8e/204p41.png)

![[画像4]周期41振動子の発見とOmniperiodicityの証明完了に狂喜乱舞するConwaylife Loungeの皆様](lounge.png)

**宇宙船**: 形状を維持しながら空間内を移動していくパターンを指します。5個の黒セルによって構成される**グライダー**はライフゲームのみならず、いわゆるハッカー文化全体のシンボルともなっています。この他、**軽量級**、**中量級**、**重量級**の宇宙船パターンも有名です。

![[画像5]グライダー](https://conwaylife.com/w/images/7/79/Glider.png)

**グライダーガン**はグライダーを連続的に打ち出すパターンであり、ライフゲームで最初に発見された無限に成長するパターンです。複数のグライダーガンを適切に配置して論理ゲートを構築することで、任意の計算をライフゲームによって模倣できることがライフゲームの考案者であるJ.Conwayらに、また独立にグライダーガンの発見者であるW.Gosperによっても示されました。

![[画像6]Gosperのグライダーガン](https://conwaylife.com/w/images/9/9f/Gosperglidergun.png)

<!-- ### エデンの園配置
**エデンの園配置**は、それを生み出す初期パターンが存在しないようなパターンを指します。

多くの種のセルオートマトンにおいてのエデンの園配置が存在することを示す**エデンの園定理**は、エドワード・ムーアとジョン・マイヒルによって1970年以前に証明されていました。すなわち、1970年のコンウェイのライフゲームの完成以前の時点で、ライフゲームにおけるエデンの園配置の存在が示されていたと考えることもできます。

 セルオートマトンでは、ある初期パターンが与えられたとき、遷移後のパターンはただ1通りに定まります。

セルオートマトンにおいて、複数種類の有限パターンから同じパターンが生まれることがないとき、つまりパターンの過去の状態が高々1通りであるとき、そのセルオートマトンは有限パターンに対して**単射である**といいます。セルオートマトンが単射であるには、有限パターンが

また、どのようなパターンも他のパターンの結果として生まれるとき、そのセルオートマトンは**全射である**といいます。全射であるセルオートマトンにおいては、全てのパターンが何らかの過去の状態をもつので、エデンの園配置は存在しないこととなります。

![画像の代替テキスト](https://conwaylife.com/w/images/9/9d/Grin_preblock_evolution.png)

エデンの園定理は、セルオートマトンが全射であることと、有限パターンに対して単射であることは同値であることを示しています。 -->

## 基本セルオートマトン

### 基本セルオートマトンとは?

**基本セルオートマトン**は最もシンプルなセルオートマトンの一種であり、Stephen Wolframらによって詳細に研究されました。ルールは非常に単純でありながらも多様な振る舞いを見せる、セルオートマトンの魅力が最も際立っているものと言えます。

![[画像7]ルール30基本セルオートマトンの時間発展](https://upload.wikimedia.org/wikipedia/commons/a/aa/Rule30-256-rows.png)

図_は、ルール30基本セルオートマトンで、初期条件として中央に1つ黒セルを置いたときの時間発展を表す図です。ここまでで扱ってきたライフゲームが2次元に広がる空間で進行していたのに対して、基本セルオートマトンは1次元の空間で進行します。初期条件を一番上の行に置き、その下に1世代後の状態、2世代後の状態、…を縦に並べたものがこの図です。

### 基本セルオートマトンのルール
基本セルオートマトンは、2状態3近傍の1次元セルオートマトンです。セルが横一列に無数に並んでおり、常に0または1のいずれかの状態を取っています。各セルが次に取る状態は、それ自身とその両隣の計3セルが現在取っている状態によって定められます。ルール30の場合、セルの状態遷移は次の表に従います。

![[画像8]ルール30の状態遷移規則](rule30_rule.png)

白を0、黒を1とみなし、表の左側を高位とした2進数として読み10進数に変換すると、このルールを表す数30となります。基本セルオートマトンのルールは256通り考えられ、その全てに同様の数を与えることができます。この数は**ウルフラムコード**と呼ばれます。

ライフゲームと同様に、全てのセルの状態は一斉に更新されます。更新された後の状態は、直前の状態の下に次々と並べて描かれます。これは鉄道の運行や素粒子の相互作用などを表現するダイアグラムとも類似しています。

### 境界条件
セルオートマトンは通常、無限に広がった空間を想定して実行されます。しかしコンピュータでシミュレーションを行うとなると、メモリの制約などにより空間を有限にせざるを得なくなります。すると端点のセルに近傍がなくなってしまうので、これを適切に処理する必要があります。

端点の処理、**境界条件**にはいくつかの種類があり、セルオートマトンの用途などにより使い分けられます。

**周期的境界条件**では、空間の両端を繋ぎリング状にします。空間に明確な果てが発生しないため、無限の空間で実行したときのセルオートマトンの挙動が分かりやすくなります。

**固定的境界条件**は、両端のセルを特定の状態に固定します。観察するパターンに対して十分広い空間が用意できる場合には、実装が簡易な固定的境界条件を用いることが多いほか、物体中の熱伝導のシミュレーションを行う場合などにも適してます。

**反射的境界条件**では、端点に鏡を置いたように、隣のセルの状態をコピーします。

**散逸的境界条件**は、端点のセルの状態を世代ごとにランダムに割り当てるものです。周期的境界条件ではセル数によって特異な振る舞いを見せることがありますが、散逸的境界条件を使用するとセル数による特異性を吸収することができます。

### 複雑性による分類
基本セルオートマトンは、そのルールによって様々な挙動を見せます。256種のルールは、ランダムな初期条件を与えたときの挙動によって、大きく4つのクラスに分類されます。

**クラス1**は、全てのセルが短時間で均一な状態に収束するようなものです。

自明な例としてはルール0やルール255などがあります。これらのルールは、近傍の状態如何に関わらずそれぞれ白/黒に遷移するものであり、どのような初期配置が与えられてもその1世代後には全てのセルが白/黒となって安定します。このほかルール249なども短時間で空間全体が黒に安定するクラス1のルールです。

![[画像9]ルール0(上)とルール255(下)の状態遷移規則](rule0_and_rule255.png)

![[画像10]ルール249基本セルオートマトンの時間発展](rule249.bmp)

**クラス2**は周期的なパターンを発生させるようなルールです。ルール4は、黒セルのうち両隣のセルがともに白であるもののみを保存するようなルールです。開始1世代後には隣り合わない黒マスのみが残り、以降はこのパターンが持続します。

![[画像11]ルール4の状態遷移規則](rule4_rule.png)

![[画像12]ルール4基本セルオートマトンの時間発展](rule4.bmp)

**クラス3**は予測不能なカオス的振る舞いを呈するものです。先程のルール30はその代表格で、その大変ランダムな振る舞いはWolframAlphaの乱数生成アルゴリズムにも用いられています。このクラスのセルオートマトンは初期条件の変化に非常に敏感で、ただ1セルの状態の違いが以降の状態遷移を大きく変化させることがあります。

**クラス4**では、局所的に作り出される構造が複雑に相互作用するようなルールです。クラス2とクラス3の中間に位置し、**カオスの縁**とも呼ばれます。これに属するルール110はライフゲームと同様に万能計算が可能であるとStephen Wolframは予言しており、2004年にMatthew Cookがこれを証明しました。

![[画像13]ルール110の状態遷移規則](rule110_rule.png)

![[画像14]ルール110基本セルオートマトンの時間発展](rule110.bmp)

## おわりに
ここまでお読みくださりありがとうございます。スケジューリングの不備により、紹介した2種以外のセルオートマトンやエデンの園配置に関する内容などを取りこぼしてしまい、セルオートマトンの基礎を学ぶ内容としてやや不十分なものになってしまったかもしれません。本稿により、シンプルな規則から複雑な振る舞いが発生するセルオートマトンの面白さが少しでも伝わっていれば幸いです。

## 参考文献
### 画像出典
Web文献は全て2023-09-17に取得

- 画像1: https://conwaylife.com/ をスクリーンショット
- 画像2: https://conwaylife.com/wiki/Cribbage より
- 画像3: https://conwaylife.com/wiki/204P41 より
- 画像4: Discord「Conwaylife Lounge」サーバーよりスクリーンショット
- 画像5: https://conwaylife.com/wiki/Glider より
- 画像6: https://conwaylife.com/wiki/Gosper_glider_gun より
- 画像7: https://commons.wikimedia.org/wiki/File:CA_rule30s.png を使用
- 画像8: 自作
- 画像9: 自作
- 画像10: 自作プログラムで生成
- 画像11: 自作
- 画像12: 自作プログラムで生成
- 画像13: 自作
- 画像14: 自作プログラムで生成

### 参考文献
- 蜷川繁, 米田政明, 広瀬貞樹「散逸境界条件下のセルオートマトンについて」『情報処理学会論文誌 38(4)』(情報処理学会, 1997)
- 『LifeWiki』(https://conwaylife.com/wiki/Main_Page)
- Weisstein, Eric W. "Game of Life." From MathWorld--A Wolfram Web Resource.
- Weisstein, Eric W. "Elementary Cellular Automaton." From MathWorld--A Wolfram Web Resource.

### 推奨図書
- Joel L.Schiff『セルオートマトン』(共立出版, 2011)

現象のモデル化・解析の手法としてのセルオートマトンについて詳細に取り上げられている。本来は大学院生、研究者向けの書籍であるが、アートワークとしても秀逸で大変楽しめる。

- 岡瑞起、池上高志、ドミニク・チェン、青木竜太、丸山典宏『作って動かすALife』(O'Reilly Japan, 2018)

セルオートマトンのほか、SCLやボイドモデルなどの生命に似た振る舞いを見せる人工生命モデルについて詳しく解説している。

- 川添愛『精霊の箱 チューリングマシンをめぐる冒険 上・下』(東京大学出版会, 2016)

オートマトンと言語理論をファンタジー調の物語で学べる『白と黒のとびら』(東京大学出版会, 2013)の続編。主テーマをチューリングマシンに移して、新米魔術師ガレットの成長と苦悩を描く。

- グレッグ・イーガン『順列都市 上・下』(ハヤカワ文庫SF, 1999)

人間の精神をソフトウェア化する〈コピー〉が一般的となりつつある近未来。模擬化学セルオートマトン「オートヴァース」に傾倒するマリアは、富豪たちに「数学的に保障された不死」を売り込んでいるポールに奇妙な依頼を受ける。例外ルールの集合体である〈コピー〉とは異なり、空間全体で均一なルールで進行するオートヴァースのエレガントさをマリアが恋人に語るシーンは一見の価値がある。

</main>
